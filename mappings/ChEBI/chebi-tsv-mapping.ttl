@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rev: <http://purl.org/stuff/rev#> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix chebi: <http://www.ebi.ac.uk/chebi/> .
@prefix : <http://tib.de/ontario/mapping#> .

:chebi_compound
  	rml:logicalSource [
              rml:source "compounds.tsv";
  			  rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  			 ];
  	rr:subjectMap [
  		    rr:template "http://www.ebi.ac.uk/chebi/{ID}";
        	rr:class chebi:Compound
  	];
  	rr:predicateObjectMap [
      rr:predicate chebi:id;
      rr:objectMap [
        rml:reference "ID"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:accession;
      rr:objectMap [
        rml:reference "CHEBI_ACCESSION"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate dc:identifier;
      rr:objectMap [
        rml:reference "CHEBI_ACCESSION"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate rdfs:label;
      rr:objectMap [
        rml:reference "NAME"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:name;
      rr:objectMap [
        rml:reference "NAME"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate dc:modified;
      rr:objectMap [
        rml:reference "MODIFIED_ON"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate dc:createdBy;
      rr:objectMap [
        rml:reference "CREATED_BY"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:definition;
      rr:objectMap [
        rml:reference "DEFINITION"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate rdfs:seeAlso;
      rr:objectMap [
        rml:reference "PARENT_ID"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:url;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/searchId.do?chebiId=CHEBI:{ID}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:source;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/source-{SOURCE}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:status;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/status-{STATUS}"
      ]
    ].

:chebi_compound_names
  	rml:logicalSource [
              rml:source "names.tsv";
  			  rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  			];
  	rr:subjectMap [
  		    rr:template "http://www.ebi.ac.uk/chebi/{COMPOUND_ID}";
        	rr:class chebi:Compound
  	];
    rr:predicateObjectMap [
      rr:predicate chebi:synonym;
      rr:objectMap [
        rml:reference "NAME";
        rr:language "LANGUAGE"
      ]
    ].

:chebi_compound_comments
  	rml:logicalSource [
              rml:source "comments.tsv";
  			  rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  			];
  	rr:subjectMap [
  		      rr:template "http://www.ebi.ac.uk/chebi/{COMPOUND_ID}";
        		rr:class chebi:Compound
  	];
    rr:predicateObjectMap [
      rr:predicate rdfs:comment;
      rr:objectMap [
        rml:reference "TEXT"
      ]
    ].

:chebi_compound_chemical_data
    rml:logicalSource [
              rml:source "chemical_data.tsv";
              rml:referenceFormulation ql:TSV;
              rml:iterator "*"
              ];
    rr:subjectMap [
            rr:template "http://www.ebi.ac.uk/chebi/{COMPOUND_ID}";
            rr:class chebi:Compound
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:formula;
      rr:objectMap [
        rml:reference "CHEMICAL_DATA[TYPE=FORMULA]"
      ]
    ].

:chebi_ontology
      rml:logicalSource [
                rml:source "ontology.tsv";
                rml:referenceFormulation ql:TSV;
                rml:iterator "*"
                ];
      rr:subjectMap [
              rr:template "http://www.ebi.ac.uk/chebi/{TITLE}";
              rr:class rdfs:Class
      ];
        rr:predicateObjectMap [
          rr:predicate chebi:title;
          rr:objectMap [
            rml:reference "TITLE"
          ]
        ].

:chebi_compound_vertice
    rml:logicalSource [
              rml:source "vertice.tsv";
              rml:referenceFormulation ql:TSV;
              rml:iterator "*"
              ];
    rr:subjectMap [
            rr:template "http://www.ebi.ac.uk/chebi/{COMPOUND_CHILD_ID}";
            rr:class chebi:Compound
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:verticeRef;
      rr:objectMap [
        rml:reference "VERTICE_REF"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:ontologyId;
      rr:objectMap [
        rr:parentTriplesMap :chebi_ontology;
        rr:joinCondition [
			    rr:child "ONTOLOGY_ID";
			    rr:parent "ID"
			]
      ]
    ].

:chebi_compound_relation
      rml:logicalSource [
                rml:source "relation.tsv";
                rml:referenceFormulation ql:TSV;
                rml:iterator "*"
                ];
      rr:subjectMap [
              rr:template "http://www.ebi.ac.uk/chebi/{INIT_ID}";
              rr:class chebi:Compound
      ];
      rr:predicateObjectMap [
        rr:predicate chebi:is_a;
        rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/{FINAL_ID[TYPE=is_a]}";
        rr:class chebi:Compound
        ]
      ].


:chebi_compound_db_accession
  	rml:logicalSource [
              rml:source "database_accession.tsv";
  						rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  						];
  	rr:subjectMap [
  		    rr:template "http://www.ebi.ac.uk/chebi/accession/{ID}";
        	rr:class chebi:Accession
  	];
    rr:predicateObjectMap [
      rr:predicate chebi:accType;
      rr:objectMap [
        rml:reference "TYPE"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:accessionNumber;
      rr:objectMap [
        rml:reference "ACCESSION_NUMBER"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:source;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/source-{SOURCE}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:compound;
      rr:objectMap [
      rr:template "http://www.ebi.ac.uk/chebi/{COMPOUND_ID}";
      rr:class chebi:Compound
      ]
    ].

:chebi_compound_reference
  	rml:logicalSource [
              rml:source "reference.tsv";
  						rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  						];
  	rr:subjectMap [
  		      rr:template "http://www.ebi.ac.uk/chebi/reference/{REFERENCE_DB_NAME}_{REFERENCE_ID}";
        		rr:class chebi:Reference
  	];
    rr:predicateObjectMap [
      rr:predicate chebi:refDBName;
      rr:objectMap [
        rml:reference "REFERENCE_DB_NAME"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:refId;
      rr:objectMap [
        rml:reference "REFERENCE_ID"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:refName;
      rr:objectMap [
        rml:reference "REFERENCE_NAME"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:locationInRef;
      rr:objectMap [
      rml:reference "LOCATION_IN_REF"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:compound;
      rr:objectMap [
      rr:template "http://www.ebi.ac.uk/chebi/{COMPOUND_ID}";
      rr:class chebi:Compound
      ]
    ].
