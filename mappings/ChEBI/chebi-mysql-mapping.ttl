@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rev: <http://purl.org/stuff/rev#> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix chebi: <http://www.ebi.ac.uk/chebi/> .
@prefix : <http://tib.de/ontario/mapping#> .

:chebi_compound
  	rml:logicalSource [
              rml:source "compounds";
  			  rml:referenceFormulation ql:SQL;
              rml:iterator "*"
  			 ];
  	rr:subjectMap [
  		    rr:template "http://www.ebi.ac.uk/chebi/{id[star=3]}";
        	rr:class chebi:Compound
  	];
  	rr:predicateObjectMap [
      rr:predicate chebi:id;
      rr:objectMap [
        rml:reference "id"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:accession;
      rr:objectMap [
        rml:reference "chebi_accession"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate dc:identifier;
      rr:objectMap [
        rml:reference "chebi_accession"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate rdfs:label;
      rr:objectMap [
        rml:reference "name"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:name;
      rr:objectMap [
        rml:reference "name"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate dc:modified;
      rr:objectMap [
        rml:reference "modified_on"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate dc:createdBy;
      rr:objectMap [
        rml:reference "created_by"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:definition;
      rr:objectMap [
        rml:reference "definition"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate rdfs:seeAlso;
      rr:objectMap [
        rml:reference "parent_id"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:url;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/searchId.do?chebiId=CHEBI:{id}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:source;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/source-{source}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:status;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/status-{status}"
      ]
    ].

:chebi_compound_names
  	rml:logicalSource [
              rml:source "names";
  			  rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  			];
  	rr:subjectMap [
  		    rr:template "http://www.ebi.ac.uk/chebi/{compound_id}";
        	rr:class chebi:Compound
  	];
    rr:predicateObjectMap [
      rr:predicate chebi:synonym;
      rr:objectMap [
        rml:reference "name";
        rr:language "language"
      ]
    ].

:chebi_compound_comments
  	rml:logicalSource [
              rml:source "comments";
  			  rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  			];
  	rr:subjectMap [
  		      rr:template "http://www.ebi.ac.uk/chebi/{compound_id}";
        		rr:class chebi:Compound
  	];
    rr:predicateObjectMap [
      rr:predicate rdfs:comment;
      rr:objectMap [
        rml:reference "text"
      ]
    ].

:chebi_compound_chemical_data
    rml:logicalSource [
              rml:source "chemical_data";
              rml:referenceFormulation ql:TSV;
              rml:iterator "*"
              ];
    rr:subjectMap [
            rr:template "http://www.ebi.ac.uk/chebi/{compound_id}";
            rr:class chebi:Compound
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:formula;
      rr:objectMap [
        rml:reference "chemical_data[type=FORMULA]"
      ]
    ].

:chebi_ontology
      rml:logicalSource [
                rml:source "ontology";
                rml:referenceFormulation ql:TSV;
                rml:iterator "*"
                ];
      rr:subjectMap [
              rr:template "http://www.ebi.ac.uk/chebi/{title}";
              rr:class rdfs:Class
      ];
        rr:predicateObjectMap [
          rr:predicate chebi:title;
          rr:objectMap [
            rml:reference "title"
          ]
        ];
        rr:predicateObjectMap [
          rr:predicate chebi:id;
          rr:objectMap [
            rml:reference "id"
          ]
        ].

:chebi_compound_vertice
    rml:logicalSource [
              rml:source "vertice";
              rml:referenceFormulation ql:TSV;
              rml:iterator "*"
              ];
    rr:subjectMap [
            rr:template "http://www.ebi.ac.uk/chebi/{compound_id}";
            rr:class chebi:Compound
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:verticeRef;
      rr:objectMap [
        rml:reference "vertice_ref"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:ontologyId;
      rr:objectMap [
        rr:parentTriplesMap :chebi_ontology;
        rr:joinCondition [
			    rr:child "ontology_id";
			    rr:parent "id"
			]
      ]
    ].

:chebi_compound_relation
      rml:logicalSource [
                rml:source "relation";
                rml:referenceFormulation ql:TSV;
                rml:iterator "*"
                ];
      rr:subjectMap [
              rr:template "http://www.ebi.ac.uk/chebi/{init_id}";
              rr:class chebi:Compound
      ];
      rr:predicateObjectMap [
        rr:predicate chebi:is_a;
        rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/{final_id[type=is_a]}";
        rr:class chebi:Compound
        ]
      ].


:chebi_compound_db_accession
  	rml:logicalSource [
              rml:source "database_accession";
  						rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  						];
  	rr:subjectMap [
  		    rr:template "http://www.ebi.ac.uk/chebi/accession/{id}";
        	rr:class chebi:Accession
  	];
    rr:predicateObjectMap [
      rr:predicate chebi:accType;
      rr:objectMap [
        rml:reference "type"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:accessionNumber;
      rr:objectMap [
        rml:reference "accession_number"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:source;
      rr:objectMap [
        rr:template "http://www.ebi.ac.uk/chebi/source-{source}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:compound;
      rr:objectMap [
      rr:template "http://www.ebi.ac.uk/chebi/{compound_id}";
      rr:class chebi:Compound
      ]
    ].

:chebi_compound_reference
  	rml:logicalSource [
              rml:source "reference";
  						rml:referenceFormulation ql:TSV;
              rml:iterator "*"
  						];
  	rr:subjectMap [
  		      rr:template "http://www.ebi.ac.uk/chebi/reference/{reference_db_name}_{reference_id}";
        		rr:class chebi:Reference
  	];
    rr:predicateObjectMap [
      rr:predicate chebi:refDBName;
      rr:objectMap [
        rml:reference "reference_db_name"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:refId;
      rr:objectMap [
        rml:reference "reference_id"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:refName;
      rr:objectMap [
        rml:reference "reference_name"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:locationInRef;
      rr:objectMap [
      rml:reference "location_in_ref"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate chebi:compound;
      rr:objectMap [
      rr:template "http://www.ebi.ac.uk/chebi/{compound_id}";
      rr:class chebi:Compound
      ]
    ].
