@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rev: <http://purl.org/stuff/rev#> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix : <http://tib.de/ontario/mapping#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix lsdl: <http://lsdl.tib.eu/vocab/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .

###############################################
############### Drug ##########################
##############################################
:drugbank_drug
  	rml:logicalSource [
              rml:source <http://ontario.tib.eu/drugbanknewxmltest/datasource/Drugbankxml>;
  						rml:referenceFormulation ql:XPath;
              rml:iterator "drugbank.xml$/drugbank/drug"
  						];
  	rr:subjectMap [
  		      rr:template "http://lsdl.tib.eu/drugbank/Drug/{drugbank-id[*][_primary=true]/_VALUE}";
        		rr:class lsdl:Drug
  	];
    rr:predicateObjectMap [
      rr:predicate lsdl:name;
      rr:objectMap [
        rml:reference "name"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:proteinStructure;
      rr:objectMap [
        rr:template "https://s3-us-west-2.amazonaws.com/drugbank/protein_structures/full/{drugbank-id[*][_primary=true]}.png?1266600387"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:description;
      rr:objectMap [
        rml:reference "description"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:casNumber;
      rr:objectMap [
        rml:reference "cas-number"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:unii;
      rr:objectMap [
        rml:reference "unii"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:metabolism;
      rr:objectMap [
        rml:reference "metabolism"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:routeOfElimination;
      rr:objectMap [
        rml:reference "route-of-elimination"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:volumeOfDistribution;
      rr:objectMap [
        rml:reference "volume-of-distribution"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:drugClassification;
      rr:objectMap [
        rml:reference "classification/class"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:state;
      rr:objectMap [
        rml:reference "state"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:indication;
      rr:objectMap [
        rml:reference "indication"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:toxicity;
      rr:objectMap [
        rml:reference "toxicity"
      ]
    ];
  	rr:predicateObjectMap [
      		rr:predicate lsdl:drugType;
          rr:objectMap [
            rml:reference "_type"
          ]
  	];
    rr:predicateObjectMap [
      rr:predicate lsdl:pharmacology;
      rr:objectMap [
        rml:reference "pharmacodynamics"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:mechanismOfAction;
      rr:objectMap [
        rml:reference "mechanism-of-action"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:absorption;
      rr:objectMap [
        rml:reference "absorption"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:halfLife;
      rr:objectMap [
        rml:reference "half-life"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:clearance;
      rr:objectMap [
        rml:reference "clearance"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:fdaLabelFiles;
      rr:objectMap [
        rml:reference "fda-label"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:msdsFiles;
      rr:objectMap [
        rml:reference "msds"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:updateDate;
      rr:objectMap [
        rml:reference "_updated"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:creationDate;
      rr:objectMap [
        rml:reference "_created"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:affectedOrganism;
      rr:objectMap [
        rml:reference "affected-organisms/affected-organism[*]"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate rdfs:label;
      rr:objectMap [
        rml:reference "name"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate foaf:page;
      rr:objectMap [
        rr:template "http://www.drugbank.ca/drugs/{drugbank-id[*][_primary=true]}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate owl:sameAs;
      rr:objectMap [
        rr:template "http://www4.wiwiss.fu-berlin.de/drugbank/resource/drugs/{drugbank-id[*][_primary=true]}";
        rr:class <http://www4.wiwiss.fu-berlin.de/drugbank/resource/drugbank/drugs>
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:sequence;
      rr:objectMap [
        rml:reference "sequences/sequence[*]/_VALUE"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:sequenceFormat;
      rr:objectMap [
        rml:reference "sequences/sequence[*]/_format"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:synonym;
      rr:objectMap [
        rml:reference "synonyms/synonym[*]/_VALUE"
      ]
    ];

    rr:predicateObjectMap [
      rr:predicate lsdl:secondaryAccessionNumber;
      rr:objectMap [
        rml:reference "drugbank-id[*][_primary=null]"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:atcCode;
      rr:objectMap [
        rml:reference "atc-codes/atc-code[*]/_code"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:primaryAccessionNo;
      rr:objectMap [
        rml:reference "drugbank-id[*][_primary=true]"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:ahfsCode;
      rr:objectMap [
        rml:reference "ahfs-codes/ahfs-code[*]"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:averageMass;
      rr:objectMap [
        rml:reference "average-mass"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:pdbExperimentalId;
      rr:objectMap [
         rml:reference  "pdb-entries/pdb-entry[*]"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:foodInteraction;
      rr:objectMap [
         rml:reference  "food-interactions/food-interaction[*]"
      ]
    ];
    # experimental properties
    ######################################################
    rr:predicateObjectMap [
      rr:predicate lsdl:molecularWeightAverage;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=Molecular Weight]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:chemicalFormula;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=Molecular Formula]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:pkaIsoelectricPoint;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=Isoelectric Point]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:experimentalLogpHydrophobicity;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=Hydrophobicity]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:experimentalWaterSolubility;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=Water Solubility]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:meltingPoint;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=Melting Point]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:inchiIdentifier;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=InChI]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:inchiKey;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=InChIKey]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:chemicalIupacName;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=IUPAC Name]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:smilesStringCanonical;
      rr:objectMap [
        rml:reference "experimental-properties/property[*][kind=SMILES]/value"
      ]
    ];
    # calculated properties
    ######################################################
    rr:predicateObjectMap [
      rr:predicate lsdl:predictedLogpHydrophobicity;
      rr:objectMap [
        rml:reference "calculated-properties/property[*][kind=Hydrophobicity]/value"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:predictedWaterSolubility;
      rr:objectMap [
        rml:reference "calculated-properties/property[*][kind=Water Solubility]/value"
      ]
    ];
    # external identifiers
    ######################################################
    rr:predicateObjectMap [
      rr:predicate lsdl:dpdDrugIdNumber;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=Drugs Product Database (DPD)]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:pharmgkbId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=PharmGKB]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:pubchemCompoundId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=PubChem Compound]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:pubchemSubstanceId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=PubChem Substance]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:uniprotId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=UniProtKB]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:ttdId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=Therapeutic Targets Database]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:wikipediaId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=Wikipedia]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:chemblId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=ChEMBL]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:chebiId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=ChEBI]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:genbankId;
      rr:objectMap [
         rml:reference  "external-identifiers/external-identifier[*][resource=GenBank Gene Database]/identifier"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:keggCompoundId;
      rr:objectMap [
         rr:template  "http://bio2rdf.org/cpd:{external-identifiers/external-identifier[*][resource=KEGG Compound]/identifier}"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:keggDrugId;
      rr:objectMap [
         rr:template  "http://bio2rdf.org/kegg:{external-identifiers/external-identifier[*][resource=KEGG Drug]/identifier}"
      ]
    ];
    # external links
    ######################################################
    rr:predicateObjectMap [
      rr:predicate lsdl:rxlistLink;
      rr:objectMap [
        rml:reference "external-links/external-link[*][resource=RxList]/url"
      ]
    ];
    rr:predicateObjectMap [
      rr:predicate lsdl:pdrhealthLink;
      rr:objectMap [
        rml:reference "external-links/external-link[*][resource=PDRhealth]/url"
      ]
    ].
